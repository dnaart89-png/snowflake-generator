<!doctype html>
<html lang="en">
<head>
  <!-- Nameflake Studio ‚Äî v1.0 (LOCKED) -->
  <!-- Sanity checks after upload:
       [ ] Header shows banner.png (case sensitive)
       [ ] Default reads ‚ÄúDavid Loves Angie‚Äù
       [ ] Only Facebook share button, centered
       [ ] Dark parchment bg + gold buttons
       [ ] Left AdSense rail visible (or blank if not eligible yet)
       [ ] Footer has ONE Privacy Policy link
  -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nameflake Studio</title>

  <!-- Reduce caching while we iterate -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <meta name="google-adsense-account" content="ca-pub-9007523138058958" />
  <meta name="description" content="Turn any name or word into a one-of-a-kind snowflake. Pick your font, color, arms, and spacing‚Äîthen download as PNG or SVG. Coloring-friendly outline fonts included." />

  <!-- Google Fonts (pin a fixed list) -->
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Playfair+Display:wght@400;700&family=Lora:wght@400;700&family=Cinzel:wght@400;700&family=Montserrat:wght@400;700&family=Raleway:wght@400;700&family=Great+Vibes&family=Dancing+Script:wght@400;700&family=Londrina+Outline&family=Bungee+Outline&family=Kumar+One+Outline&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --cran:#7b2323; --ever:#144a34; --gold:#d6b46a;
      --cream:#e7d7b3; --cream2:#dbc28e; --ink:#262626; --paper:#fff;
      --glass: rgba(255,255,255,.72);
      --shadow: 0 12px 28px rgba(0,0,0,.14);
      --gold-grad: linear-gradient(135deg,#e8c87e,#caa453);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      background:
        radial-gradient(1200px 520px at 50% -10%, rgba(255,255,255,.45), transparent 70%),
        linear-gradient(135deg, var(--cream) 0%, #e2cda1 35%, var(--cream2) 100%);
      font-family:'Libre Baskerville',serif; overflow-x:hidden;
    }

    /* Header */
    .site-header{ padding:0 0 12px; border-bottom:6px solid var(--gold);
      background: linear-gradient(135deg, #6b2b2b, #5c2424);
      box-shadow: var(--shadow);
    }
    .banner{ max-width:1280px; margin:0 auto; display:block; width:100%; height:auto; object-fit:cover; }

    /* Layout */
    .shell{ max-width:1280px; margin:18px auto; padding:0 16px; }
    .row{ display:grid; grid-template-columns: 260px 1fr 260px; gap:14px; }
/* === Stack the action buttons vertically === */
.controls .btn,
.controls .facebook-btn {
  display: block;
  width: 100%;
  max-width: 260px;
  margin: 10px auto;
  text-align: center;
}

/* Add soft spacing between buttons */
.controls .btn + .btn,
.controls .btn + .facebook-btn {
  margin-top: 8px;
}
 @media (max-width: 980px){ .row{ grid-template-columns:1fr; } }

    .card{ background:var(--glass); backdrop-filter: blur(8px);
      border:1px solid rgba(255,255,255,.7); border-radius:16px; box-shadow:var(--shadow); }

    /* Left rail (ads) */
    .rail{ padding:10px }
    .rail .ad-card{ padding:8px 10px }

    /* Stage */
    .stage{ padding:12px; }
    .stage-frame{
      background: radial-gradient(circle at 50% 30%, rgba(214,180,106,.18), transparent 45%), var(--paper);
      border-radius:12px; box-shadow: inset 0 0 0 2px rgba(0,0,0,.05);
      overflow:hidden; position:relative; padding:10px;
    }
    svg{ width:100%; height:auto; display:block; position:relative; z-index:1 }

    /* Controls */
   .controls {
  padding: 18px;
  background: none;
  border: none;
  box-shadow: none;
}
.controls label {
  border-bottom: 1px dashed rgba(0,0,0,.1);
  padding-bottom: 6px;
}
    .controls h3{ margin:4px 4px 12px; font-family:Poppins,system-ui,sans-serif; }
    .grid{ display:grid; gap:.6rem; grid-template-columns: 1fr; }
    @media (max-width: 620px){ .grid{ grid-template-columns:1fr; } }
    .controls label{
      display:flex; align-items:center; justify-content:space-between; gap:.75rem; font-size:14px;
      border-bottom:1px dashed rgba(0,0,0,.08); padding-bottom:6px;
    }
    .controls input, .controls select{
      width:200px; max-width:60%;
      padding:9px 10px; border-radius:10px; border:1px solid rgba(0,0,0,.12); background:#fff; font-size:14px;
    }

    .buttons{ display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; justify-content:center }
    .btn{
      appearance:none; border:1px solid rgba(0,0,0,.12); background:#fff; color:var(--ink);
      padding:10px 16px; border-radius:12px; font-weight:700; cursor:pointer; box-shadow:var(--shadow);
      transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 14px 30px rgba(0,0,0,.16) }
    .btn.primary{ background: var(--gold-grad); border-color: transparent; color:#2a2a2a }

    /* Share */
    .share-wrap{ text-align:center; padding:12px 10px }
    .fbshare{ display:inline-block; padding:10px 16px; border-radius:12px; background:#1877f2; color:#fff; font-weight:700; text-decoration:none; }

    /* About */
    .about { padding:18px; margin-top:16px }
    .about h3{ margin:0 0 8px; color:var(--ever); font-family:Poppins,system-ui,sans-serif; }

    /* Footer */
    .footer{ text-align:center; font-size:12px; opacity:.9; padding:20px 10px 28px }
    .footer a{ color:inherit }/* existing CSS above */

/* === Mockups Section === */
.mockups-section {
  margin: 26px auto;
  padding: 22px;
  background: rgba(255,255,255,0.75);
  border-radius: 14px;
  border: 1px solid rgba(0,0,0,.08);
  box-shadow: 0 6px 16px rgba(0,0,0,.12);
  max-width: 1100px;
}

.mockups-title {
  text-align: center;
  font-size: 24px;
  margin-bottom: 8px;
  color: #4a3a2a;
}

.mockups-desc {
  text-align: center;
  margin: 0 auto 20px;
  max-width: 700px;
  font-size: 15px;
}

.mockup-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 18px;
  justify-items: center;
}

.mockup-grid img {
  width: 100%;
  max-width: 260px;
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,.08);
  box-shadow: 0 4px 12px rgba(0,0,0,.10);
  background: #fff;
}
</style>
  </style>
</head>
<body>

  <!-- Header (tagline is baked into the image) -->
  <header class="site-header">
    <!-- version param helps bust cache while we‚Äôre stabilizing -->
    <img class="banner" src="banner.png?v=1" alt="Nameflake Studio banner">
  </header>

  <main class="shell">
    <div class="row">
      <!-- LEFT RAIL: AdSense -->
      <aside class="rail card">
        <section class="ad-card">
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-9007523138058958"
               data-ad-slot="6836589862"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
          <script>try{(adsbygoogle=window.adsbygoogle||[]).push({});}catch(e){}</script>
        </section>
      </aside>

      <!-- CENTER: Stage -->
      <section class="stage card">
        <div class="stage-frame">
          <svg id="flake" viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg" aria-label="Snowflake preview">
            <g id="root" transform="translate(400,400)"></g>
          </svg>
        </div>
      </section>

      <!-- RIGHT: Controls -->
      <aside class="controls card">
        <h3>Snowflake Controls</h3>
        <div class="grid">
          <label>Word or Short Phrase <input id="word" value="David Loves Angie" /></label>
          <label>Arms <input id="arms" type="number" min="3" max="24" value="8" /></label>
          <label>Font size <input id="fs" type="number" value="100" /></label>
          <label>Arm length (px) <input id="len" type="number" value="350" /></label>
          <label>Join gap (px) <input id="gap" type="number" value="90" /></label>
          <label>Tilt (¬∞) <input id="tilt" type="number" value="0" /></label>
          <label>Font
            <select id="font">
              <option value="Dancing Script" data-kind="cursive" selected>Dancing Script</option>
              <option value="Bungee Outline" data-kind="cursive">Bungee Outline</option>
              <option value="Kumar One Outline" data-kind="serif">Kumar One Outline</option>
              <option value="Libre Baskerville" data-kind="serif">Libre Baskerville</option>
              <option value="Playfair Display" data-kind="serif">Playfair Display</option>
              <option value="Lora" data-kind="serif">Lora</option>
              <option value="Cinzel" data-kind="serif">Cinzel</option>
              <option value="Montserrat" data-kind="sans-serif">Montserrat</option>
              <option value="Raleway" data-kind="sans-serif">Raleway</option>
              <option value="Poppins" data-kind="sans-serif">Poppins</option>
              <option value="Great Vibes" data-kind="cursive">Great Vibes</option>
              <option value="Dancing Script" data-kind="cursive">Dancing Script</option>
            </select>
          </label>
          <label>Color <input id="color" type="color" value="#000000" /></label>
        </div>

        <div class="buttons">
          <button id="download" class="btn">Download PNG</button>
          <button id="downloadSvg" class="btn">Download SVG</button>
          <button id="print" class="btn primary">Print</button>
        </div>

        <div class="share-wrap">
          <a class="fbshare" href="#" id="fbshare">Share on Facebook</a>
        </div>
      </aside>
    </div>

    <!-- ABOUT -->
    <section class="info-panel card">
  <p class="lede">
    Your personalized snowflake can be used for endless projects!
    Print it on ornaments, greeting cards, or stickers. Use it in
    digital art, social media graphics, or classroom crafts. Couples
    love creating matching snowflakes to celebrate engagements,
    weddings, and anniversaries!
  </p>

  <div class="tip">
    <div class="tip-emoji" aria-hidden="true">üé®</div>
    <div class="tip-body">
      <h4>Coloring-Friendly Fonts</h4>
      <p>
        Try <strong>Londrina Outline</strong>, <strong>Bungee Outline</strong>,
        or <strong>Kumar One Outline</strong> for printable snowflakes you can color in!
      </p>
    </div>
  </div>

  <div class="cta">
    <p class="cta-lead">Show Us Your Design!</p>
    <p class="hashtag">#MyNameSnowflake</p>
  </div>
</section>
    <!-- MOCKUP GALLERY -->
<section class="mockups-section card">
  <h2 class="mockups-title">See What You Can Create</h2>
  <p class="mockups-desc">
    Your personalized snowflake can become so many things ‚Äî from wedding keepsakes to cozy winter decor. 
    Explore a few of our favorite ideas below!
  </p>

  <div class="mockup-grid">
    <img src="mockup-coloring-page.png" alt="Coloring Page Mockup">
    <img src="mockup-hoodie.png" alt="Hoodie Design Mockup">
    <img src="mockup-ornament.png" alt="Christmas Ornament Mockup">
    <img src="mockup-wedding -icon.png" alt="Wedding Symbol Mockup">
    <img src="mockup-window-clings.png" alt="Window Clings Mockup">
  </div>
</section>
      <h3>‚ùÑ About Nameflake Studio</h3>
      <p>Turn any name or word into a one-of-a-kind snowflake! Pick your font, color, and style ‚Äî then download or print your creation.</p>
      <h4>üé® Coloring-Friendly Fonts</h4>
      <p>Try <strong>Londrina Outline</strong>, <strong>Bungee Outline</strong>, or <strong>Kumar One Outline</strong> for printable snowflakes you can color in.</p>
      <h4>üí° Tip</h4>
      <p>Use a short word for bold, petal-like designs ‚Äî or a longer word for intricate lace effects.</p>
    </section>
  </main>

 <footer class="footer-bar">
  <div class="footer-inner">
    <span>¬© 2025 Nameflake Studio</span>
    <span class="sep">|</span>
    <a href="privacy.html">Privacy Policy</a>
    <span class="sep">|</span>
    <a href="terms.html">Terms of Use</a>
    <span class="sep">|</span>
    <a href="about.html">About</a>
    <span class="sep">|</span>
    <a href="faq.html">FAQ</a>
  </div>
</footer>

  <!-- AdSense loader -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9007523138058958" crossorigin="anonymous"></script>

  <script>
    /* ===================  JS (LOCKED)  =================== */
    const svgNS = "http://www.w3.org/2000/svg";
    const $ = id => document.getElementById(id);
    const root = $("root");
    function v(id, fb){ const el=$(id); return el ? el.value : fb; }
    function selectedFontStack(){
      const sel = $("font");
      return `'${sel.value}', ${sel.selectedOptions[0].dataset.kind || "serif"}`;
    }

    async function waitForFont(fontFamily, sizePx = 40) {
      try {
        await document.fonts.load(`${sizePx}px "${fontFamily}"`);
        await document.fonts.ready;
      } catch(e){}
    }
    async function inlineFontsIntoSVG(svgEl, families) {
      const cssChunks = [];
      for (const fam of families) {
        const cssURL = `https://fonts.googleapis.com/css2?family=${encodeURIComponent(fam)}:wght@400;700&display=swap`;
        const css = await (await fetch(cssURL)).text();
        const urls = Array.from(css.matchAll(/url\((https:[^)]+\.woff2)\)/g)).map(m => m[1]);
        let inlined = css;
        for (const u of urls) {
          const ab = await (await fetch(u)).arrayBuffer();
          const b64 = btoa(String.fromCharCode(...new Uint8Array(ab)));
          inlined = inlined.replaceAll(u, `data:font/woff2;base64,${b64}`);
        }
        cssChunks.push(inlined);
      }
      const style = document.createElementNS(svgNS,"style");
      style.setAttribute("type","text/css");
      style.textContent = cssChunks.join("\n");
      const clone = svgEl.cloneNode(true);
      clone.insertBefore(style, clone.firstChild);
      return clone;
    }

    async function generate(){
      const WORD  = (v("word","David Loves Angie")).toString();
      const ARMS  = +v("arms",8);
      const FS    = +v("fs",100);
      const LEN   = +v("len",350);
      const GAP   = +v("gap",90);
      const TILT  = +v("tilt",0);
      const COLOR = v("color","#000000");
      const FONT  = selectedFontStack();
      const FAMILY = $("font").value;

      await waitForFont(FAMILY, FS);
      root.innerHTML = "";

      const hub = document.createElementNS(svgNS,"circle");
      hub.setAttribute("r","2.5"); hub.setAttribute("fill",COLOR); hub.setAttribute("opacity",".55");
      root.appendChild(hub);

      function armPair(){
        const arm=document.createElementNS(svgNS,"g");

        const go=document.createElementNS(svgNS,"g");
        go.setAttribute("transform",`rotate(${-90+TILT})`);
        arm.appendChild(go);
        const to=document.createElementNS(svgNS,"text");
        to.setAttribute("fill",COLOR); to.setAttribute("font-size",FS); to.setAttribute("font-family",FONT);
        to.setAttribute("lengthAdjust","spacingAndGlyphs"); to.setAttribute("textLength",String(LEN-GAP));
        to.setAttribute("text-anchor","start"); to.setAttribute("x",String(GAP)); to.textContent=WORD;
        go.appendChild(to);

        const gi=document.createElementNS(svgNS,"g");
        gi.setAttribute("transform",`scale(1,-1) rotate(${-90-TILT})`);
        arm.appendChild(gi);
        const ti=document.createElementNS(svgNS,"text");
        ti.setAttribute("fill",COLOR); ti.setAttribute("font-size",FS); ti.setAttribute("font-family",FONT);
        ti.setAttribute("lengthAdjust","spacingAndGlyphs"); ti.setAttribute("textLength",String(LEN-GAP));
        ti.setAttribute("text-anchor","start"); ti.setAttribute("x",String(GAP)); ti.textContent=WORD;
        gi.appendChild(ti);

        return arm;
      }

      const pr = armPair();
      for(let i=0;i<ARMS;i++){
        const holder = document.createElementNS(svgNS,"g");
        holder.setAttribute("transform", `rotate(${(360/ARMS)*i})`);
        holder.appendChild(pr.cloneNode(true));
        root.appendChild(holder);
      }
    }

    async function downloadSVG(){
      const svg = document.getElementById("flake");
      const fam = document.getElementById("font").value;
      const svgWithFonts = await inlineFontsIntoSVG(svg, [fam]);
      const data = new XMLSerializer().serializeToString(svgWithFonts);
      const blob = new Blob([data], { type: "image/svg+xml;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      const word = (v("word","snowflake")||"snowflake").replace(/\s+/g,'_');
      a.href = url; a.download = `${word}_flake.svg`; a.click();
      URL.revokeObjectURL(url);
    }

    async function downloadPNG(whiteBg=false){
      const svg = document.getElementById("flake");
      const fam = document.getElementById("font").value;
      const svgWithFonts = await inlineFontsIntoSVG(svg, [fam]);

      let svgStr = new XMLSerializer().serializeToString(svgWithFonts);
      if (whiteBg) svgStr = svgStr.replace("<svg ","<svg style=\"background:white\" ");

      const blob = new Blob([svgStr], { type: "image/svg+xml;charset=utf-8" });
      const url = URL.createObjectURL(blob);

      const img = new Image();
      img.crossOrigin = "anonymous";
      img.onload = function(){
        const vb = svg.viewBox.baseVal;
        const canvas = document.createElement("canvas");
        canvas.width = vb.width; canvas.height = vb.height;
        const ctx = canvas.getContext("2d");
        if (!whiteBg) ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.drawImage(img,0,0);
        URL.revokeObjectURL(url);

        const link = document.createElement("a");
        const word = (v("word","snowflake")||"snowflake").replace(/\s+/g,'_');
        link.download = whiteBg ? `${word}_flake_white.png` : `${word}_flake.png`;
        link.href = canvas.toDataURL("image/png");
        link.click();
      };
      img.src = url;
    }

    // Share (Facebook only, centered
    $("fbshare").addEventListener("click", (e)=>{
      e.preventDefault();
      const page = location.href.split('#')[0];
      window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(page)}`,'_blank');
    });

    // Bind + first render
    ["word","arms","fs","len","gap","tilt","font","color"].forEach(id=>{
      const el=$(id); if (el) el.addEventListener("input", generate);
    });
    $("download").addEventListener("click", async ()=>{
      const white = confirm("OK = white background, Cancel = transparent");
      await downloadPNG(white);
    });
    $("downloadSvg").addEventListener("click", downloadSVG);
    $("print").addEventListener("click", ()=> window.print());

    document.addEventListener("DOMContentLoaded", generate);
    /* ===================  /JS (LOCKED)  =================== */
  </script>
</body>
</html>
